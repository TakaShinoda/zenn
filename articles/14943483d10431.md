---
title: 'React Email ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¼ãƒ«ã‚’é…ä¿¡ã™ã‚‹'
emoji: 'ğŸ“¨'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['react', 'mail']
published: false
---

# ã¯ã˜ã‚ã«

<!-- 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 -->

:::message
ã“ã®è¨˜äº‹ã¯ [å¼è­·å£«ãƒ‰ãƒƒãƒˆã‚³ãƒ  Advent Calendar 2022](https://qiita.com/advent-calendar/2022/bengo4com) ã® 23 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
:::

ã“ã‚“ã«ã¡ã¯ã€‚
å¼è­·å£«ãƒ‰ãƒƒãƒˆã‚³ãƒ  ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µã‚¤ãƒ³äº‹æ¥­æœ¬éƒ¨ã®ç¯ ç”°ï¼ˆ[@tttttt_621_s](https://twitter.com/tttttt_621_s)ï¼‰ã§ã™ã€‚
æ™®æ®µã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã«å¾“äº‹ã—ã¦ãŠã‚Šã¾ã™ã€‚

å…ˆæ—¥ React Email ã¨ã„ã†ã‚‚ã®ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

@[tweet](https://twitter.com/zenorocha/status/1600149944060420097?s=20&t=A2QtcWe9u5kdpwReHuNOgQ)

![](https://storage.googleapis.com/zenn-user-upload/131637fd912b-20221215.png)

https://react.email/

React Email ã¯ã€React + TypeScript ã§ HTML ãƒ¡ãƒ¼ãƒ«ã‚’æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ãƒ¡ãƒ¼ãƒ«é…ä¿¡ã¯é‡è¦ãªæ©Ÿèƒ½ã§ã™ã€‚
ãã®éƒ¨åˆ†ã‚’ React + TypeScript ã§å®Ÿè£…ã§ãã‚‹ç‚¹ã«èˆˆå‘³ãŒæ¹§ãã•ã‚ã£ã¦ã¿ã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€React Email ã¨ SendGrid ã‚’ä½¿ã£ã¦ ãƒ¡ãƒ¼ãƒ«ã®é…ä¿¡ã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚

# React Email ã¨ã¯

å‰è¿°ã®é€šã‚Šã€ React Email ã‚’ä½¿ã†ã“ã¨ã§ React + TypeScript ã§ HTML ãƒ¡ãƒ¼ãƒ«ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

å…·ä½“çš„ã«ã¯ã€React Email ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã„ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
https://github.com/zenorocha/react-email/tree/main/packages

æœ€çµ‚çš„ã« render ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ HTML ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ä¸»è¦ãªä»¥ä¸‹ã®ãƒ¡ãƒ¼ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

- Gmail
- Apple Mail
- Outlook
- Yahoo! Mail
- HEY
- Superhuman

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Automatic Setup ã¨ Manual Setup ãŒã‚ã‚‹ã®ã§ã™ãŒä»Šå›ã¯ Automatic Setup ã«ã—ã¾ã—ãŸã€‚

- ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã¨è‡ªå‹•çš„ã«ã™ã¹ã¦ã®è¨­å®šãŒè¡Œã‚ã‚Œã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚

```
npx create-email@latest
```

```
npm install
```

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```
.
â”œâ”€â”€ emails
â”‚   â”œâ”€â”€ notion-magic-link.tsx
â”‚   â”œâ”€â”€ plaid-verify-identity.tsx
â”‚   â”œâ”€â”€ stripe-welcome.tsx
â”‚   â””â”€â”€ vercel-invite-user.tsx
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ readme.md
```

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯ã“ã‚Œã§ãŠã—ã¾ã„ã§ã™ã€‚

# å‹•ã‹ã—ã¦ã¿ã‚‹

- ä»Šå›ã¯ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã® SendGrid ã‚’ä½¿ã†ã®ã§ SDK ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```
npm install @react-email/render @sendgrid/mail
```

https://react.email/docs/integrations/sendgrid

- æ¬¡ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

```
.
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ Email.tsx
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

```tsx: src/index.tsx
import { render } from '@react-email/render'
import sendgrid from '@sendgrid/mail'
import { Email } from './Email'

sendgrid.setApiKey(process.env.SENDGRID_API_KEY)

const emailHtml = render(<Email url="https://example.com" />)

const options = {
  from: 'you@example.com',
  to: 'user@gmail.com',
  subject: 'hello world',
  html: emailHtml,
}

sendgrid.send(options)
```

```tsx: src/Email.tsx
import { FC } from 'react'
import { Button } from '@react-email/button'

type Props = {
  url: string
}

export const Email: FC<Props> = ({ url }) => {
  return (
    <Button href={url} data-testid="button">
      Click me
    </Button>
  )
}

```

- SendGrid ã® API ã‚­ãƒ¼ã®å–å¾—ã¯ä¼šå“¡ç™»éŒ²å¾Œä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚

https://sendgrid.kke.co.jp/docs/Tutorials/A_Transaction_Mail/manage_api_key.html

- ãƒ“ãƒ«ãƒ‰ã—ã¦ç”Ÿæˆã•ã‚ŒãŸ js ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/718c34919fd4-20221215.png)

# ãŠã‚ã‚Šã«

ä»Šå›ä½œæˆã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚
https://github.com/TakaShinoda/react-email-sample

# ãŠã¾ã‘

## ãƒ†ã‚¹ãƒˆã‚’æ›¸ã

React Email ã‚’ä½¿ã£ã¦ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚

- jest, testing-library ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
npm install --save-dev jest @testing-library/react
```

- Email ã‚³ãƒ³ãƒãƒãƒ¼ãƒˆã“ã‚“ã½ã­ãƒ¼ã¨ã„å¯¾ã—ã¦ 1 ã¤ãƒ†ã‚¹ãƒˆä½œæˆã—ã¦ã¿ã¾ã™ã€‚

```tsx: src/__tests__/Email.test.tsx
import '@testing-library/jest-dom'
import { render, screen } from '@testing-library/react'
import { Email } from '../Email'

describe('Email.tsx', () => {
  const defaultUrl = 'https://example.com'

  test('Click me ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨', () => {
    render(<Email url={defaultUrl} />)
    const element = screen.getByTestId('button')
    expect(element).toHaveTextContent('Click me')
  })
})
```

- ãƒ†ã‚¹ãƒˆã‚‚å‹•ã‹ã™ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

```
PASS  src/__tests__/Email.test.tsx
Email.tsx
  âœ“ Click me ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ (30 ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
```

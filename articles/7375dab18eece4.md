---
title: 'satisfies ã‚’ä½¿ã£ã¦å¬‰ã—ã‹ã£ãŸã¨ã“ã‚'
emoji: 'ğŸ› ï¸'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['typescript']
published: false
---

# ã¯ã˜ã‚ã«

æ—¢å­˜ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã€TypeScript ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã— satisfies ã‚’ä½¿ã£ãŸå®Ÿè£…ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
ãã®ä¸­ã§ã€satisfies ã‚’ä½¿ã£ã¦ç‰¹ã«å¬‰ã—ã‹ã£ãŸã¨ã“ã‚ã‚’æ›¸ã‹ã›ã¦ã„ãŸã ãã¾ã™ã€‚

# satisfies ã¨ã¯

- TypeScript 4.9 ã§è¿½åŠ ã•ã‚ŒãŸæ¼”ç®—å­
- å¼ã¨å‹ãŒãƒãƒƒãƒã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹
- const assertion ã¨ä½µç”¨ã§ãã‚‹
- annotation ã¨ã®é•ã„ã¨ã—ã¦æ¨è«–çµæœã‚’ä¿æŒã§ãã‚‹

è©³ã—ãã¯å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ã€ã“ã¡ã‚‰ã®è¨˜äº‹ã«ã‚ã‹ã‚Šã‚„ã™ãç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-9.html

https://zenn.dev/moneyforward/articles/typescript-as-const-satisfies

# å¬‰ã—ã‹ã£ãŸã¨ã“ã‚

å€‹äººçš„ã«æ—¢å­˜ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ãŠã„ã¦ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ satisfies ã‚’ä½¿ã£ãŸå®Ÿè£…ã«ã™ã‚‹ã¨ã¨ã¦ã‚‚å¬‰ã—ã‹ã£ãŸã§ã™ã€‚

ã‚ã‚‹é–¢å¿ƒã”ã¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å®šç¾©ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã€ãã®å€¤ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹å®Ÿè£…ãŒã‚ã‚Šã¾ã—ãŸã€‚ï¼ˆã“ã“ã§ã¯ãƒã‚±ãƒ¢ãƒ³ã®çŠ¶æ…‹ç•°å¸¸ã‚’ä¾‹ã«ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚ï¼‰

```ts
type ValueOf<T, K extends keyof T = keyof T> = T[K]

const ailmentStatus = {
  Burn: 0,
  Freeze: 1,
  Paralysis: 2,
  Poison: 3,
  Sleep: 4,
  Fainting: 99,
} as const

type AilmentNumber = ValueOf<typeof ailmentStatus>
//  AilmentNumber ã¯ 0 | 1 | 2 | 3 | 4 | 99
```

ã“ã® ailment ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯æ„å›³ã—ãªã„å€¤ãŒå…¥ã£ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

```ts
const ailmentStatus = {
  Burn: 0,
  Freeze: 1,
  Paralysis: 2,
  Poison: 3,
  Sleep: 4,
  Fainting: 99,
  Terastal: 10000, // æ„å›³ã—ã¦ã„ãªã„ Terastal ãŒå…¥ã‚Œã‚‰ã‚Œã¦ã—ã¾ã†
} as const
```

Terastal ã®ã‚ˆã†ãªæ„å›³ã—ã¦ã„ãªã„å€¤ãŒå…¥ã‚‰ãªã„ã‚ˆã†ã« annotation ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```ts
type Ailment = 'Burn' | 'Freeze' | 'Paralysis' | 'Poison' | 'Sleep' | 'Fainting'

type AilmentStatus = {
  [key in Ailment]: number
}

const ailmentStatus: AilmentStatus = {
  Burn: 0,
  Freeze: 1,
  Paralysis: 2,
  Poison: 3,
  Sleep: 4,
  Fainting: 99,
  Terastal: 10000, // 'Terastal' ã¯å‹ 'AilmentStatus' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
} as const

type AilmentNumber = ValueOf<typeof ailmentStatus>
//  AilmentNumber ã¯ number
```

ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦å‹ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã€æ„å›³ã—ã¦ã„ãªã„å€¤ãŒå…¥ã‚‹ã“ã¨ã‚’é˜²ãã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

ã—ã‹ã—ã€å½“ãŸã‚Šå‰ã§ã™ãŒ AilmentStatus å‹ã§ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã¨ã€AilmentNumber ãŒ number å‹ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

ã“ã®æ™‚ä»¥ä¸‹ã®ã‚ˆã†ã« satisfies ã‚’ä½¿ã†ã“ã¨ã§æ±‚ã‚ã¦ã„ãŸã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
const ailmentStatus = {
  Burn: 0,
  Freeze: 1,
  Paralysis: 2,
  Poison: 3,
  Sleep: 4,
  Fainting: 99,
  Terastal: 10000, // 'Terastal' ã¯å‹ 'AilmentStatus' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
} as const satisfies AilmentStatus

type AilmentNumber = ValueOf<typeof ailmentStatus>
// AilmentNumber ã¯ number å‹ã§ã¯ãªãã€ailmentStatus ã®å€¤ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã«ãªã‚‹
```

satisfies ã«ã‚ˆã£ã¦å‹ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¤ã¤ã€æ¨è«–çµæœã‚’ä½¿ã£ã¦ AilmentNumber å‹ã‚‚ ailmentStatus ã®å€¤ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã¾ã¾ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

# ã¾ã¨ã‚

å€‹äººçš„ã«æ—¢å­˜ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ satisfies ã‚’ä½¿ã£ã¦å¬‰ã—ã‹ã£ãŸã¨ã“ã‚ã‚’æ›¸ã‹ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚

ä»–ã«ã‚‚ã¾ã ã¾ã ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã®ã§ã€ã‚‚ã†å°‘ã—æ·±ã¼ã£ã¦ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã—ãŸã€‚



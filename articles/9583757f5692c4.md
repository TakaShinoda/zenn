---
title: 'Nuxt3, Vuetify3, Zod で管理画面 UI を作成する'
emoji: '📘'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: ['nuxtjs']
published: false
---

# はじめに

先日 Nuxt3.5 がリリースされました。

https://nuxt.com/blog/v3-5

私自身 Nuxt3 をさわったことがなく今回は練習その 1 として、よくありそうな管理画面の UI を作ってみました。

## やったこと

- Nuxt + Vuetify を使ってユーザ登録フォームを作成
- Zod を使ってフォームのバリデーション処理を作成

## やってないこと

- 実際ユーザのデータを DB に登録

# プロジェクトの作成

以下のコマンドを実行することで Nuxt3 のプロジェクトを作成することができます。

```
npx nuxi init <project-name>
```

https://nuxt.com/docs/getting-started/installation

# レイアウトの作成

今回は以下のようなレイアウトを作成します。

![](https://storage.googleapis.com/zenn-user-upload/4150ee6a1b48-20230604.png)

Nuxt3 のプロジェクト配下に layouts ディレクトリを作成し、レイアウトファイルを作成します。

これにより、非同期インポートによって自動的にロードされアプリケーション全体でレイアウトが適用されます。

https://nuxt.com/docs/guide/directory-structure/layouts#layouts-directory

```vue: layouts/default.vue
<template>
  <v-app>
    <Header />
    <SideNav />
    <v-main>
      <v-container>
        <slot />
      </v-container>
    </v-main>
    <Footer />
  </v-app>
</template>
```

また、ヘッダーなどの各種コンポーネントは components ディレクトリ配下に作成しています。

Nuxt は、components ディレクトリにあるコンポーネントを自動的にインポートします。

## Header の作成

Vuetify の `v-app-bar` を使用しました。

https://vuetifyjs.com/en/components/app-bars/

```vue:components/Header.vue
<template>
  <v-app-bar color="light-blue-accent-4">
    <v-app-bar-title>
      管理画面
    </v-app-bar-title>
  </v-app-bar>
</template>
```

## SideNav の作成

Vuetify の `v-navigation-drawer` を使用しました。

https://vuetifyjs.com/en/components/navigation-drawers/

```vue:components/SideNav.vue
<script setup lang="ts">
  const menus = [
    {
      name: 'Top',
      path: '/'
    },
    {
      name: 'User',
      path: '/user'
    }
  ]
</script>

<template>
  <v-navigation-drawer permanent>
    <v-list>
      <v-list-item
        v-for="(menu, i) in menus"
        :key="i"
        :to="menu.path"
      >
        <v-list-item-title class="text-h6">
          {{ menu.name }}
        </v-list-item-title>
      </v-list-item>
    </v-list>
  </v-navigation-drawer>
</template>
```

## Footer の作成

Vuetify の `v-footer` を使用しました。

https://vuetifyjs.com/en/components/footers/

```vue:components/Footer.vue
<template>
  <v-footer color="light-blue-accent-4" app>
    v 0.0.1
  </v-footer>
</template>
```

## app.vue でレイアウトを表示

`app.vue` に `NuxtLayout` タグを追加して上記で作成したレイアウトを表示します

```vue: app.vue
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>
```

# ユーザ登録画面の作成

Nuxt3 のプロジェクト配下に pages ディレクトリを作成します。
それにより Vue Router を使用しすべてのページに対して自動的にルーティングが設定されます。

https://nuxt.com/docs/guide/directory-structure/pages

```vue: pages/user/index.vue
<template>
  <div>
    <h1>ユーザ一覧</h1>
    <v-sheet class="ma-4">
      <v-btn color="light-blue-accent-4" class="mt-4 w-20" to="/user/create">
        ユーザ作成
      </v-btn>
    </v-sheet>
  </div>
</template>
```

```vue: pages/user/create.vue
<script setup lang="ts">
  const name = ref('')
  const email = ref('')
  const submit = () => {
    // 後ほどバリデーション処理を追記
  }
</script>

<template>
  <div>
    <h1>ユーザ登録</h1>
    <v-sheet class="ma-4">
      <v-form @submit.prevent="submit">
        <v-row>
          <v-col cols="2">
            <v-list-subheader>
              ユーザ名
            </v-list-subheader>
          </v-col>
          <v-col cols="10">
            <v-text-field
              v-model="name"
              label="ユーザ名"
            >
            </v-text-field>
          </v-col>
        </v-row>
        <v-row>
          <v-col cols="2">
            <v-list-subheader>
              メールアドレス
            </v-list-subheader>
          </v-col>
          <v-col cols="10">
            <v-text-field
              v-model="email"
              label="メールアドレス"
              type="email"
            >
            </v-text-field>
          </v-col>
        </v-row>
        <v-btn color="light-blue-accent-4" type="submit" class="mt-4 w-20">Submit</v-btn>
      </v-form>
    </v-sheet>
  </div>
</template>
```

![](https://storage.googleapis.com/zenn-user-upload/cf56a05e889f-20230604.png)
